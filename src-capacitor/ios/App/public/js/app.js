(function(e){function t(t){for(var n,o,l=t[0],s=t[1],d=t[2],c=0,u=[];c<l.length;c++)o=l[c],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);p&&p(t);while(u.length)u.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={1:0},i={1:0},a=[];function l(e){return s.p+"js/"+({}[e]||e)+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{2:"0c0dd522",3:"d580cbd4",4:"c31d584e",5:"b4f05178",6:"ede21d58",7:"aaa6c136",8:"28cdfff1",9:"17413d92",10:"713d08cc",11:"22291067",12:"df7ba38d",13:"39ecba65",14:"d5000920",15:"725df84d",16:"31d6cfe0",17:"31d6cfe0"}[e]+".css",i=s.p+n,a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var d=a[l],c=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===n||c===i))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){d=u[l],c=d.getAttribute("data-href");if(c===n||c===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete o[e],p.parentNode.removeChild(p),r(a)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){o[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=a);var d,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=l(e);var u=new Error;d=function(t){c.onerror=c.onload=null,clearTimeout(p);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,r[1](u)}i[e]=void 0}};var p=setTimeout((function(){d({type:"timeout",target:c})}),12e4);c.onerror=c.onload=d,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],c=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var p=c;a.push([0,0]),r()})({0:function(e,t,r){e.exports=r("2f39")},"032d":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"h",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return h}));var n=r("59ca"),o=r.n(n),i=(r("ea7b"),r("e71f"),r("8934"),r("741f"),{apiKey:"AIzaSyASLMIDhzFU-PIvIiThq1hLc-oBq0v_YeY",authDomain:"delivery-system-1.firebaseapp.com",databaseURL:"https://delivery-system-1.firebaseio.com",projectId:"delivery-system-1",storageBucket:"delivery-system-1.appspot.com",messagingSenderId:"599630228897",appId:"1:599630228897:web:fd4e89a17be0b8b9ed2fe0",measurementId:"G-E5290VWM1F"});o.a.initializeApp(i);const a=o.a.firestore(),l=o.a.auth(),s=o.a.functions(),d=o.a.messaging(),c=(l.currentUser,a.collection("users")),u=a.collection("delivery"),p=a.collection("deliveryGroup"),h=a.collection("stats")},"2f39":function(e,t,r){"use strict";r.r(t);r("5319");var n=r("c973"),o=r.n(n),i=(r("7d6e"),r("e54f"),r("985d"),r("31cd"),r("2b0e")),a=r("1f91"),l=r("42d2"),s=r("b05d");i["a"].use(s["a"],{config:{},lang:a["default"],iconSet:l["a"]});var d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},c=[],u=r("ded3"),p=r.n(u),h=r("032d"),m={name:"App",mounted(){const e=this,t=void 0!==this.$q.platform.is.mobile;h["a"].onAuthStateChanged(function(){var r=o()((function*(r){if(r)try{const n=yield r.getIdTokenResult();e.$store.commit("setUser",r),e.$store.commit("setClaims",n.claims),yield e.loadUserInfo(r.phoneNumber,n.claims.role),"admin"!=n.claims.role&&"driver"!=n.claims.role||(yield e.$store.dispatch("loadRegions"),yield e.$store.dispatch("loadPosition",{isMobile:t}),h["e"].onTokenRefresh(e.handleToken()),h["e"].onMessage(e=>{console.log("Message received. ",e)}),h["e"].requestPermission().then(e.handleToken()).catch(e=>console.error("Token Error",e))),e.$router.push("/delivery")}catch(n){console.error(n)}else e.$store.commit("setUser",null),e.$store.commit("setClaims",null)}));return function(e){return r.apply(this,arguments)}}())},methods:{handleToken(){return console.log("handleToken"),h["e"].getToken().then(e=>{h["h"].doc(this.$store.state.userInfo.id).update({messagingToken:e})})},loadUserInfo(e,t){var r=this;return o()((function*(){try{let t=h["h"].where("mobile","==",e),n=yield t.get();if(0==n.size){const e=r;h["a"].signOut().then(()=>{e.$store.commit("setUser",null),e.$store.commit("setClaims",null),e.$router.push({name:"LoginFailed"})})}else r.$store.commit("setUserInfo",p()(p()({},n.docs[0].data()),{},{id:n.docs[0].id}))}catch(t){console.log(t)}}))()}}},f=m,g=r("2877"),v=Object(g["a"])(f,d,c,!1,null,null,null),y=v.exports,b=(r("4e82"),r("e6cf"),r("ddb0"),r("2f62"));let S=null;Promise.resolve().then(r.bind(null,"81c3")).then(e=>{S=e.Plugins.Geolocation}),i["a"].use(b["a"]);const P=new b["a"].Store({state:{name:[],getUserName:"",user:null,claims:null,userInfo:null,regions:[],regionSeq:0,position:null},getters:{getLatLng(e){return{lat:e.position.coords.latitude,lng:e.position.coords.longitude}},getRegions(e){return[...e.regions.sort((e,t)=>e.code>t.code?1:t.code>e.code?-1:0)]},getRegionsForSelect(e){const t=e.regions,r=[];for(let n=0;n<t.length;n++)r.push({value:t[n].docid,label:t[n].name});return r},getriversForSubSelect(e){const t=e.regions,r={};let n=[];for(let o=0;o<t.length;o++){n=[];let e=t[o].drivers;if(e&&0!=e.length){n=[];for(let t=0;t<e.length;t++)n.push({value:e[t].userId,label:e[t].name})}r[t[o].docid]=n}return r},getUserID(e){return e.userInfo.id},getUserName(e){return e.userInfo&&e.userInfo.name?e.userInfo.name:""},getUserRole(e){return e.claims&&e.claims.role?e.claims.role:""},getRole(e){return e.claims.role},isShop(e){return e.user&&e.claims&&"shop"==e.claims.role},isAdmin(e){return e.user&&e.claims&&"admin"==e.claims.role},isDriver(e){return e.user&&e.claims&&"driver"==e.claims.role}},mutations:{insertRegion(e,t){t.data.drivers||(t.data.drivers=[]);for(let r=0;r<t.data.drivers.length;r++)t.data.drivers[r]["id"]=e.regionSeq++;e.regionSeq++,e.regions.push(p()(p()({},t.data),{},{docid:t.docid,id:e.regionSeq}))},updateRegion(e,t){const r=e=>e.docid===t.docid,n=e.regions.findIndex(r);t.data.drivers||(t.data.drivers=[]);for(let o=0;o<t.data.drivers.length;o++)t.data.drivers[o]["id"]=e.regionSeq++;e.regionSeq++,e.regions[n]=p()(p()({},t.data),{},{docid:t.docid,id:e.regionSeq})},deleteRegion(e,t){e.regions=e.regions.filter(e=>e.docid!=t.docid)},setUserInfo(e,t){e.userInfo=t},setUser(e,t){e.user=t},setClaims(e,t){e.claims=t},setPosition(e,t){e.position=t}},actions:{loadRegions({commit:e}){return o()((function*(){try{h["b"].collection("deliveryGroup").onSnapshot((function(t){t.docChanges().forEach((function(t){"added"===t.type?e("insertRegion",{data:t.doc.data(),docid:t.doc.id}):"modified"===t.type?e("updateRegion",{data:t.doc.data(),docid:t.doc.id}):"removed"===t.type&&(console.log(t.doc.id),e("deleteRegion",{docid:t.doc.id}))}))}))}catch(t){console.error(t)}}))()},loadPosition({commit:e},t){return o()((function*(){t.isMobile?(S.getCurrentPosition().then(t=>{e("setPosition",t)}),S.watchPosition({},(t,r)=>{e("setPosition",t)})):(navigator.geolocation.getCurrentPosition(t=>{e("setPosition",t)}),navigator.geolocation.watchPosition(t=>{e("setPosition",t)}))}))()}}});var E=P,w=r("8c4f");const D=(e,t,r)=>{console.log(E.state),E.state.user?r():r("/")},C=(e,t,r)=>{console.log(E.state),E.state.user&&"admin"==E.state.claims.role?r():r(null)},_=(e,t,r)=>{console.log(E.state),!E.state.user||"admin"!=E.state.claims.role&&"driver"!=E.state.claims.role?r(null):r()},V=[{path:"/",component:()=>Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"713b")),children:[{path:"login-failed",name:"LoginFailed",component:()=>Promise.all([r.e(0),r.e(17)]).then(r.bind(null,"8a9f"))},{path:"",name:"Home",component:()=>Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"8b24")),beforeEnter:(e,t,r)=>{E.state.user?r("/#/delivery"):r()}},{path:"delivery",name:"Delivery",component:()=>Promise.all([r.e(0),r.e(2)]).then(r.bind(null,"fcf6")),beforeEnter:D},{path:"show-delivery",name:"ShowDelivery",props:!0,component:()=>Promise.all([r.e(0),r.e(8)]).then(r.bind(null,"46d2")),beforeEnter:D},{path:"edit-delivery",name:"EditDelivery",props:!0,component:()=>Promise.all([r.e(0),r.e(6)]).then(r.bind(null,"9822")),beforeEnter:D},{path:"assign-driver",name:"AssignDriver",props:!0,component:()=>Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"f778")),beforeEnter:D},{path:"show-regions",name:"ShowRegions",component:()=>Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"421a")),beforeEnter:C},{path:"edit-region",name:"EditRegion",props:!0,component:()=>Promise.all([r.e(0),r.e(10)]).then(r.bind(null,"2cb4")),beforeEnter:C},{path:"edit-driver",name:"EditDriver",props:!0,component:()=>Promise.all([r.e(0),r.e(9)]).then(r.bind(null,"d0e9")),beforeEnter:C},{path:"search-shops",name:"SearchShops",component:()=>Promise.all([r.e(0),r.e(13)]).then(r.bind(null,"6bf7")),beforeEnter:_},{path:"edit-shop",name:"EditShop",props:!0,component:()=>Promise.all([r.e(0),r.e(12)]).then(r.bind(null,"c3e1")),beforeEnter:_},{path:"prev-delivery",name:"PrevDelivery",props:!0,component:()=>Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"351c")),beforeEnter:D},{path:"stats",name:"StatIndex",props:!0,component:()=>Promise.all([r.e(0),r.e(14)]).then(r.bind(null,"e27a")),beforeEnter:C},{path:"stat_element",name:"StatElement",props:!0,component:()=>Promise.all([r.e(0),r.e(15)]).then(r.bind(null,"8cc5")),beforeEnter:C}]}];V.push({path:"*",component:()=>Promise.all([r.e(0),r.e(16)]).then(r.bind(null,"e51e"))});var I=V;i["a"].use(w["a"]);var R=function(){const e=new w["a"]({scrollBehavior:()=>({x:0,y:0}),routes:I,mode:"hash",base:""});return e},k=r("81c3");const{SplashScreen:A}=k["Plugins"];var q=function(){return T.apply(this,arguments)};function T(){return T=o()((function*(){const e="function"===typeof E?yield E({Vue:i["a"]}):E,t="function"===typeof R?yield R({Vue:i["a"],store:e}):R;e.$router=t;const r={router:t,store:e,render:e=>e(y),mounted(){A.hide()},el:"#q-app"};return{app:r,store:e,router:t}})),T.apply(this,arguments)}var $=o()((function*(){})),L=r("a925"),M={language:"English",delivery:"Delivery",archive:"Archive",edit_shops:"Shops",shop:"Shop",edit_regions:"Cars",sharing:"Sharing",logout:"Logout",delivery_details:"Delivery Details",name:"Name",mobile:"Mobile",address:"Address",price:"Price",items:"Items",submit:"Submit",delete:"Delete",cancel:"Cancel",from:"From",to:"To",call_register:"Please Call 0750 000 000 to register before you can login login",drivers:"Drivers",driver:"Driver",driverDetail:"Driver's Detail",shop_details:"Shop Details",long:"Longitude",lati:"Latitude",region:"Region",regionDetails:"Region Details",noResult:"Sorry, there is no result for this number",city:"City",stat:"Statistics",picked:"Picked",delivered:"Delivered",returned:"Returned",noResult:"Waiting for more deliveries!!",start:"Start",end:"End",enterValidName:"Enter a valid name",enterValidMobile:"Enter a valid mobile Number",enterValidAddress:"Enter a valid address",enterValidPrice:"Enter a valid price",code:"Code",enterValidCity:"Enter a Valid City",enterValidCode:"Enter a Valid Code",enterValidCar:"Enter a Valid Car",enterValidDate:"Enter a Valid Date",car:"Car",yes:"Yes",no:"No",areYouSureDelete:"Are you sure that you want to delete this item",search:"Search",noShopFound:"No Shop has Found",searchShop:"Search for a Shop",more:"More",clear:"Clear",receiver:"Receiver",shop_stat:"Shop Statistic",driver_stat:"Driver Statistic",type:"Type",date:"Date",daily:"Daily",monthly:"Monthly",requested:"Requested",install:"Install"},U={language:"کوردی",delivery:"گەیاندن",archive:"ئەرشیف",edit_shops:"دوکانەکان",shop:"دوکان",edit_regions:"شۆفێرەکان",sharing:"بەشکردن",logout:"دەرچوون",delivery_details:"ناوەڕۆکی گەیاندن",name:"ناو",mobile:"مۆبایل",address:"شوێن",price:"نرخ",items:"کەلوپەلەکان",submit:"ناردن",delete:"سڕینەوە",cancel:"لابردن",from:"لەلایەن",to:"لەبۆ",call_register:"تکایە پەیوەندی بە ژمارەی مۆبایل ٠٧٥٠ ٠٠٠ ٠٠٠٠ بکە پێش چوونە ژوورەوە",drivers:"شۆفێرەکان",driver:"شۆفێر",driverDetail:"دەربارەی شۆفێر",shop_details:"ناوەڕۆکی دوکان",long:"هێڵی درێژی",lati:"هێڵی پانی",region:"کەرت",regionDetails:"دەربارەی کەرت",noResult:"ببورە ئەو ژمارەیە هیچ ئەنجامێکی نییە",city:"شار",stat:"ژمێریاری",picked:"وەرگیرا",delivered:"گەیاندرا",returned:"گەڕێندراوە",noResult:"چاوەڕوانی دێلیڤەری زیاتر",start:"سەرەتا",end:"کۆتا",enterValidName:"بە ناوێك پڕبکەوە",enterValidMobile:"بە ژمارەیەکی دروست پڕبکەوە",enterValidAddress:"بە شوێنێکی دروست پڕبکەوە",enterValidPrice:"بە نرخێکی دروست پڕبکەوە",code:"کۆد",enterValidCity:"بە ناوی شارێکی دروست پڕبکەوە",enterValidCode:"بە کۆدێکی دروست پڕبکەوە",enterValidCar:"بە سەیارەیەکی دروست پڕبکەوە",enterValidDate:"بە بەروارێکی دروست پڕبکەوە",car:"سەیارە",yes:"بەڵێ",no:"نەخێر",areYouSureDelete:"بێگومانیت لە سڕینەوەی ئەو تۆمارە",search:"گەڕان",noShopFound:"هیچ دوکانێك نەدۆزراوە",searchShop:"گەڕان لە دوکان",more:"زیاتر",clear:"خاوێنی بکەوە",receiver:"وەرگر",shop_stat:"ژمێریاری دوکان",driver_stat:"ژمێریاری شۆفێر",type:"جۆر",date:"بەروار",daily:"رۆژانە",monthly:"مانگەنە",requested:"داواکراو",install:"داگرتن"},N={language:"عربي",delivery:"التوصيل",archive:"الارشیف",edit_shops:"المتاجر",shop:"متجر",edit_regions:"سیارات",sharing:"المشاركة",logout:"الخروج",delivery_details:"تفاصيل التسليم",name:"الاسم",mobile:"الموبايل",address:"العنوان",price:"السعر",items:"المواد",submit:"ارسال",delete:"حذف",cancel:"الغاء",from:"من",to:"الی",call_register:"الرجاء الاتصال بالرقم ٠٧٥٠ ٠٠٠ ٠٠٠٠ قبل ان تتمکن من الدخول",drivers:"السائقون",driver:"السائق",driverDetail:"تفاصيل السائق",shop_details:"تفاصيل المحل",long:"الخط الطولي",lati:"الخط العرضي",region:"منطقة",regionDetails:"تفاصيل المنطقة",deliveryGroup:"منطقة",noResult:"المعذرة لا یوجد ایة نتیجة لهذا الرقم",city:"المدينة",stat:"الاحصاء",picked:"التقط",delivered:"تم التوصيل",returned:"استرجع",noResult:"في انتضار توصیلات اخری",start:"البداية",end:"النهاية",enterValidName:"ادخل اسما ",enterValidMobile:"ادخل رقما صحيحا",enterValidAddress:"ادخل مکانا صحيحا",enterValidPrice:"ادخل سعرا صحيحا",code:"الکود",enterValidCity:"ادخل اسم مدينة صحيحة",enterValidCode:"ادخل کودا صحيحا",enterValidCar:"ادخل سيارة صحيحة",enterValidDate:"ادخل تاريخا صحيحا",car:"سيارة",yes:"نعم",no:"کلا",areYouSureDelete:"هل انت متاكد نم حذف هذا القيد",search:"بحث",noShopFound:"لم يتم ايجاد ایة متجر",searchShop:"بحث عن متجر",more:"اکثر",clear:"امسح",receiver:"المستلم",shop_stat:"احصاء المحل",driver_stat:"احصاء السائق",type:"نوع",date:"تاریخ",daily:"يومي",monthly:"شهري",requested:"الطلب",install:"تنزيل"},O={"en-us":M,krd:U,ar:N};i["a"].use(L["a"]);const j=localStorage.getItem("language"),x=new L["a"]({fallbackLocale:"en-us",locale:j,messages:O});"en-us"==j?Promise.resolve().then(r.bind(null,"1f91")).then(e=>{s["a"].lang.set(e.default)}):r.e(0).then(r.bind(null,"13ef")).then(e=>{s["a"].lang.set(e.default)});var F=({app:e})=>{e.i18n=x};const B=function(e){return"string"!=typeof e?e:e.replace(/[٠١٢٣٤٥٦٧٨٩]/g,(function(e){return e.charCodeAt(0)-1632})).replace(/[۰۱۲۳۴۵۶۷۸۹]/g,(function(e){return e.charCodeAt(0)-1776}))};var Y=B,G=({Vue:e})=>{e.prototype.$parseArabic=Y};const z="";function H(){return J.apply(this,arguments)}function J(){return J=o()((function*(){const{app:e,store:t,router:r}=yield q();let n=!1;const o=e=>{n=!0;const t=Object(e)===e?r.resolve(e).route.fullPath:e;window.location.href=t},a=window.location.href.replace(window.location.origin,""),l=[$,F,G];for(let d=0;!1===n&&d<l.length;d++)if("function"===typeof l[d])try{yield l[d]({app:e,router:r,store:t,Vue:i["a"],ssrContext:null,redirect:o,urlPath:a,publicPath:z})}catch(s){return s&&s.url?void(window.location.href=s.url):void console.error("[Quasar] boot error:",s)}!0!==n&&(i["a"].prototype.$q.capacitor=window.Capacitor,new i["a"](e))})),J.apply(this,arguments)}H()},"31cd":function(e,t,r){}});