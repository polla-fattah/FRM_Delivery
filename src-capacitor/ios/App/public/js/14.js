(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"50c2":function(e,t,s){"use strict";var a=s("afc4"),r=s.n(a);r.a},afc4:function(e,t,s){},e27a:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"column",attrs:{id:"stat","style-fn":e.styleFn}},[s("q-card",{staticClass:"search-card"},[s("q-expansion-item",{staticClass:"expantionLable",attrs:{label:e.$t("stat")},model:{value:e.oppened,callback:function(t){e.oppened=t},expression:"oppened"}},[s("div",{staticClass:"stat-card-content"},[s("div",{staticClass:"first-row"},[s("q-card-section",{staticClass:"search-card-element"},[s("q-btn-toggle",{attrs:{"toggle-color":"secondary",options:e.userTypeOpt},scopedSlots:e._u([{key:"driver",fn:function(){return[s("div",{staticClass:"row items-center no-wrap"},[s("div",{staticClass:"text-center"}),s("q-icon",{attrs:{right:"",name:"directions_car"}})],1)]},proxy:!0},{key:"shop",fn:function(){return[s("div",{staticClass:"row items-center no-wrap"},[s("div",{staticClass:"text-center"}),s("q-icon",{attrs:{right:"",name:"store"}})],1)]},proxy:!0}]),model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}})],1),s("q-card-section",{staticClass:"search-card-element"},[s("q-btn-toggle",{attrs:{"toggle-color":"secondary",options:e.recordTypeOpt},on:{change:function(t){e.statList=[]}},scopedSlots:e._u([{key:"daily",fn:function(){return[s("div",{staticClass:"row items-center no-wrap"},[s("div",{staticClass:"text-center"}),s("q-icon",{attrs:{right:"",name:"insert_invitation"}})],1)]},proxy:!0},{key:"monthly",fn:function(){return[s("div",{staticClass:"row items-center no-wrap"},[s("div",{staticClass:"text-center"}),s("q-icon",{attrs:{right:"",name:"event_note"}})],1)]},proxy:!0}]),model:{value:e.recordType,callback:function(t){e.recordType=t},expression:"recordType"}})],1)],1),s("div",{staticClass:"second-row"},[s("q-card-section",{staticClass:"search-card-element",staticStyle:{"margin-bottom":"20px"}},[s("q-input",{ref:"theDate",attrs:{rules:[function(t){return t&&t.length>0||e.$t("enterValidDate")}],"lazy-rules":"",filled:"",mask:"date"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxyEnd"},[s("q-date",{staticClass:"fixed-center",on:{input:function(){return e.$refs.qDateProxyEnd.hide()}},model:{value:e.dateSelected,callback:function(t){e.dateSelected=t},expression:"dateSelected"}})],1)],1)]},proxy:!0}]),model:{value:e.dateSelected,callback:function(t){e.dateSelected=t},expression:"dateSelected"}})],1),e.$store.getters.isAdmin&&"driver"==e.userType?s("q-card-section",{staticClass:"search-card-element"},[s("q-select",{attrs:{filled:"",options:e.$store.getters.getRegionsForSelect,label:e.$t("region"),"emit-value":"","map-options":"",outlined:""},model:{value:e.regionInp,callback:function(t){e.regionInp=t},expression:"regionInp"}})],1):e._e(),e.$store.getters.isAdmin&&"driver"==e.userType?s("q-card-section",{staticClass:"search-card-element"},[s("q-select",{attrs:{filled:"",options:e.driversListForRegion,label:e.$t("driver"),"emit-value":"","map-options":"",outlined:""},model:{value:e.driverUserId,callback:function(t){e.driverUserId=t},expression:"driverUserId"}})],1):e._e(),(e.$store.getters.isAdmin||e.$store.getters.isDriver)&&"shop"==e.userType?s("q-card-section",{staticClass:"search-card-element"},[s("q-input",{attrs:{filled:"",label:e.$t("shop")},model:{value:e.shopMobileInp,callback:function(t){e.shopMobileInp=t},expression:"shopMobileInp"}})],1):e._e(),(e.$store.getters.isAdmin||e.$store.getters.isDriver)&&"shop"==e.userType?s("q-card-section",{staticClass:"search-card-element"},[s("q-input",{attrs:{filled:"",label:e.$t("code")},model:{value:e.shopCodeInp,callback:function(t){e.shopCodeInp=t},expression:"shopCodeInp"}})],1):e._e()],1)]),s("q-separator",{attrs:{dark:""}}),s("q-card-actions",[s("div",{staticClass:"text-center",staticStyle:{width:"100%",color:"black"}},[s("q-btn",{staticStyle:{margin:"0px 3px",color:"red"},attrs:{color:"secondary","text-color":"yellow"},on:{click:e.onSearch}},[e._v(e._s(e.$t("search")))]),s("q-btn",{staticStyle:{margin:"0px 3px"},attrs:{color:"warning","text-color":"brown"},on:{click:e.onClear}},[e._v(e._s(e.$t("clear")))])],1)])],1)],1),s("q-scroll-area",{staticClass:"fill-window",style:e.generalStyle,attrs:{"thumb-style":e.thumbStyle,"bar-style":e.barStyle,id:"scroll-area-with-virtual-scroll-1"}},[s("q-virtual-scroll",{staticClass:"col",attrs:{"scroll-target":"#scroll-area-with-virtual-scroll-1 > .scroll",items:e.statList,"virtual-scroll-item-size":32},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item;return[s("div",{staticClass:"delivery-list-item"},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routing(a)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("q-icon",{style:e.rotating,attrs:{name:"double_arrow",size:"2.5rem"}})],1)],1),s("q-item-section",[s("q-item-label",{staticClass:"delivery-list-item-title",attrs:{lines:"1"}},[e._v(e._s(a.name))]),"shop"==a.userType?s("q-item-label",{attrs:{caption:"",lines:"2"}},[s("span",{staticClass:"text-weight-bold"},[e._v(e._s(a.requested)+" - "+e._s(a.returned))])]):s("q-item-label",{attrs:{caption:"",lines:"2"}},[s("span",{staticClass:"text-weight-bold"},[e._v(e._s(a.picked)+" - "+e._s(a.delivered))])])],1)],1)],1)]}}])}),e.showMore?s("div",{staticClass:"text-center"},[s("q-btn",{staticStyle:{transform:"rotate(180deg)"},attrs:{round:"",color:"secondary",icon:"navigation"},on:{click:e.onLoad}})],1):e._e()],1),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[s("q-btn",{attrs:{fab:"",icon:"arrow_back",color:"secondary"},on:{click:function(t){return e.$router.go(-1)}}})],1)],1)},r=[],i=(s("498a"),s("ded3")),o=s.n(i),n=s("c973"),l=s.n(n),c=s("2b0e"),d=s("032d"),p=s("59ca"),u=s.n(p),h=(s("e71f"),c["a"].extend({name:"StatIndex",components:{},data(){return{recordTypeOpt:[{label:this.$t("daily"),value:"daily",slot:"daily"},{label:this.$t("monthly"),value:"monthly",slot:"monthly"}],userTypeOpt:[{label:this.$t("driver"),value:"driver",slot:"driver"},{label:this.$t("shop"),value:"shop",slot:"shop"}],oppened:!0,showMore:!1,offset:0,height:0,userType:"driver",recordType:"daily",dataRef:null,dateSelected:"",driverUserId:"",shopMobileInp:"",shopCodeInp:"",regionInp:"",lastDoc:null,statList:[],rotating:"en-us"==this.$i18n.locale?"":"transform: rotate(180deg);",generalStyle:{height:"650px"},thumbStyle:{right:"3px",borderRadius:"4px",backgroundColor:"#0299e3",width:"8px",opacity:.75},barStyle:{borderRadius:"8px",backgroundColor:"#999999",width:"14px",opacity:.2,marginTop:"-3px",marginBottom:"-3px",paddingTop:"3px",paddingBottom:"3px"}}},computed:{driversSelection(){return this.$store.getters.getriversForSubSelect},driversListForRegion(){return this.driverUserId="",this.driversSelection[this.regionInp]},userInfo(){return this.$store.state.userInfo}},watch:{oppened(){const e=this.oppened?420:100;console.log(this.oppened);let t=this.height-this.offset-e;this.generalStyle={height:t+"px"}},userType(){this.statList=[],this.dataRef=null},recordType(){this.statList=[],this.dataRef=null}},methods:{onClear(){this.dataRef=null,this.dateSelected="",this.driverUserId="",this.shopMobileInp="",this.regionInp="",this.statList=[]},onSearch(){this.$refs.theDate.validate()&&(this.statList=[],this.oppened=!1,this.fetchData())},onLoad(){var e=this;return l()((function*(){if(e.statList&&e.dataRef){e.dataRef=e.dataRef.startAfter(e.lastDoc);const t=yield e.dataRef.get();t.empty||t.forEach(t=>{e.lastDoc=t,e.statList.push(o()(o()({},t.data()),{},{docid:t.id}))})}}))()},fetchData(){var e=this;return l()((function*(){const t=e;u.a.firestore.Timestamp;let s=d["g"];if(s=s.where("recordType","==",e.recordType),s=s.where("userType","==",e.userType),""!=e.dateSelected){console.log("dateSelected dateSelected dateSelected");const t=new Date(e.dateSelected);let a=t.getMonth()+1;a=a<=9?"0"+a:""+a;let r=t.getDate();r=r<=9?"0"+r:""+r;const i=t.getFullYear();s=s.where("strYear","==",i).where("strMonth","==",a),"daily"==e.recordType&&(s=s.where("strDay","==",r))}""!=e.driverUserId&&(s=s.where("userID","==",e.driverUserId.trim())),""!=e.shopMobileInp&&(s=s.where("userID","==",e.shopMobileInp)),e.dataRef=s;const a=yield s.get();console.log(a.empty),a.empty||a.forEach((function(e){t.lastDoc=e,t.statList.push(o()(o()({},e.data()),{},{docid:e.id}))}))}))()},routing(e){this.$router.push({name:"StatElement",params:{stat:e}})},styleFn(e,t){this.height=t,this.offset=e;let s=t-e-420;this.generalStyle={height:s+"px"}}}})),m=h,y=(s("50c2"),s("2877")),f=s("9989"),g=s("f09f"),v=s("3b73"),b=s("a370"),x=s("6a67"),S=s("0016"),q=s("27f9"),w=s("7cbe"),C=s("52ee"),I=s("ddd8"),k=s("eb85"),T=s("4b7e"),_=s("9c40"),$=s("4983"),Q=s("a12b"),D=s("66e5"),L=s("4074"),R=s("cb32"),M=s("0170"),A=s("de5e"),F=s("8572"),U=s("714f"),E=s("eebe"),P=s.n(E),O=Object(y["a"])(m,a,r,!1,null,null,null);t["default"]=O.exports;P()(O,"components",{QPage:f["a"],QCard:g["a"],QExpansionItem:v["a"],QCardSection:b["a"],QBtnToggle:x["a"],QIcon:S["a"],QInput:q["a"],QPopupProxy:w["a"],QDate:C["a"],QSelect:I["a"],QSeparator:k["a"],QCardActions:T["a"],QBtn:_["a"],QScrollArea:$["a"],QVirtualScroll:Q["a"],QItem:D["a"],QItemSection:L["a"],QAvatar:R["a"],QItemLabel:M["a"],QPageSticky:A["a"],QField:F["a"]}),P()(O,"directives",{Ripple:U["a"]})}}]);