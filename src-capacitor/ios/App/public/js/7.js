(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"30ff":function(e,t,r){"use strict";var a=r("fbdb"),o=r.n(a);o.a},"351c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"column",attrs:{id:"prev-delivery","style-fn":e.styleFn}},[r("q-card",{staticClass:"search-card"},[r("q-expansion-item",{staticClass:"expantionLable",attrs:{label:e.$t("archive")},model:{value:e.oppened,callback:function(t){e.oppened=t},expression:"oppened"}},[r("div",{staticClass:"search-card-content"},[r("q-card-section",{staticClass:"search-card-element"},[r("q-input",{attrs:{filled:"",mask:"date",label:e.$t("start")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxyStart"},[r("q-date",{staticClass:"fixed-center",on:{input:function(){return e.$refs.qDateProxyStart.hide()}},model:{value:e.dateStart,callback:function(t){e.dateStart=t},expression:"dateStart"}})],1)],1)]},proxy:!0}]),model:{value:e.dateStart,callback:function(t){e.dateStart=t},expression:"dateStart"}})],1),r("q-card-section",{staticClass:"search-card-element"},[r("q-input",{attrs:{filled:"",mask:"date",label:e.$t("end")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[r("q-popup-proxy",{ref:"qDateProxyEnd"},[r("q-date",{staticClass:"fixed-center",on:{input:function(){return e.$refs.qDateProxyEnd.hide()}},model:{value:e.dateEnd,callback:function(t){e.dateEnd=t},expression:"dateEnd"}})],1)],1)]},proxy:!0}]),model:{value:e.dateEnd,callback:function(t){e.dateEnd=t},expression:"dateEnd"}})],1),e.$store.getters.isAdmin?r("q-card-section",{staticClass:"search-card-element"},[r("q-select",{attrs:{filled:"",options:e.$store.getters.getRegionsForSelect,label:e.$t("region"),"emit-value":"","map-options":"",outlined:""},model:{value:e.regionInp,callback:function(t){e.regionInp=t},expression:"regionInp"}})],1):e._e(),e.$store.getters.isAdmin?r("q-card-section",{staticClass:"search-card-element"},[r("q-select",{attrs:{filled:"",options:e.driversListForRegion,label:e.$t("driver"),"emit-value":"","map-options":"",outlined:""},model:{value:e.driverUserId,callback:function(t){e.driverUserId=t},expression:"driverUserId"}})],1):e._e(),e.$store.getters.isAdmin||e.$store.getters.isDriver?r("q-card-section",{staticClass:"search-card-element"},[r("q-input",{attrs:{filled:"",label:e.$t("shop")},model:{value:e.shopMobileInp,callback:function(t){e.shopMobileInp=t},expression:"shopMobileInp"}})],1):e._e(),r("q-card-section",{staticClass:"search-card-element"},[r("q-input",{attrs:{filled:"",label:e.$t("receiver")},model:{value:e.customerMobileInp,callback:function(t){e.customerMobileInp=t},expression:"customerMobileInp"}})],1)],1),r("q-separator"),r("q-card-actions",[r("div",{staticClass:"text-center",staticStyle:{width:"100%",color:"black"}},[r("q-btn",{staticStyle:{margin:"0px 3px",color:"red"},attrs:{color:"secondary","text-color":"yellow"},on:{click:e.onSearch}},[e._v(e._s(e.$t("search")))]),r("q-btn",{staticStyle:{margin:"0px 3px"},attrs:{color:"warning","text-color":"brown"},on:{click:e.onClear}},[e._v(e._s(e.$t("clear")))])],1)])],1)],1),r("q-scroll-area",{staticClass:"fill-window",style:e.generalStyle,attrs:{"thumb-style":e.thumbStyle,"bar-style":e.barStyle,id:"scroll-area-with-virtual-scroll-1"}},[r("q-virtual-scroll",{staticClass:"col",attrs:{"scroll-target":"#scroll-area-with-virtual-scroll-1 > .scroll",items:e.deliveryList,"virtual-scroll-item-size":32},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item;return[r("div",{staticClass:"delivery-list-item"},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routing(a)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",[r("q-icon",{style:e.rotating,attrs:{name:"double_arrow",size:"2.5rem"}})],1)],1),r("q-item-section",[r("q-item-label",{staticClass:"delivery-list-item-title",attrs:{lines:"1"}},[e._v(e._s(e.showTitle(a)))]),r("q-item-label",{attrs:{caption:"",lines:"2"}},[r("span",{staticClass:"text-weight-bold"},[e._v(e._s(a.toAddress))])])],1)],1)],1)]}}])}),e.showMore?r("div",{staticClass:"text-center"},[r("q-btn",{staticStyle:{transform:"rotate(180deg)"},attrs:{round:"",color:"secondary",icon:"navigation"},on:{click:e.onLoad}})],1):e._e()],1),r("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[r("q-btn",{attrs:{fab:"",icon:"arrow_back",color:"secondary"},on:{click:function(t){return e.$router.go(-1)}}})],1)],1)},o=[],s=(r("498a"),r("ded3")),i=r.n(s),n=r("c973"),l=r.n(n),c=r("2b0e"),d=r("032d"),p=r("59ca"),u=r.n(p),m=(r("e71f"),c["a"].extend({name:"PrevDelivery",components:{},data(){return{oppened:!0,dataRef:null,dateStart:"",showMore:!1,dateEnd:"",driverUserId:"",customerMobileInp:"",shopMobileInp:"",regionInp:"",lastDoc:null,deliveryList:[],rotating:"en-us"==this.$i18n.locale?"":"transform: rotate(180deg);",generalStyle:{height:"650px"},thumbStyle:{right:"3px",borderRadius:"4px",backgroundColor:"#0299e3",width:"8px",opacity:.75},barStyle:{borderRadius:"8px",backgroundColor:"#999999",width:"14px",opacity:.2,marginTop:"-3px",marginBottom:"-3px",paddingTop:"3px",paddingBottom:"3px"}}},computed:{driversSelection(){return this.$store.getters.getriversForSubSelect},driversListForRegion(){return this.driverUserId="",this.driversSelection[this.regionInp]},userInfo(){return this.$store.state.userInfo}},methods:{onClear(){this.dataRef=null,this.dateStart="",this.dateEnd="",this.driverUserId="",this.customerMobileInp="",this.shopMobileInp="",this.regionInp="",this.deliveryList=[]},onSearch(){this.deliveryList=[],this.oppened=!1,this.fetchData()},onLoad(){var e=this;return l()((function*(){if(e.deliveryList&&e.dataRef){e.dataRef=e.dataRef.startAfter(e.lastDoc),e.showMore=!1;const t=yield e.dataRef.get();t.empty||(e.showMore=!0,t.forEach(t=>{e.lastDoc=t,e.deliveryList.push(i()(i()({},t.data()),{},{docid:t.id}))}))}}))()},showTitle(e){return this.$store.getters.isShop?e.toName:e.fromName},fetchData(){var e=this;return l()((function*(){e.showMore=!1;let t=e,r=d["c"];if(e.$store.getters.isDriver?r=r.where("driverID","==",e.userInfo.id):e.$store.getters.isShop&&(r=r.where("fromId","==",e.userInfo.id)),""!=e.dateStart){console.log("dateStart ");const t=e.dateStart.split("/").join("-"),a=u.a.firestore.Timestamp.fromDate(new Date(t));r=r.where("t_request",">=",a)}if(""!=e.dateEnd){console.log("dateEnd ");const t=e.dateEnd.split("/").join("-"),a=u.a.firestore.Timestamp.fromDate(new Date(t));r=r.where("t_request","<=",a)}""!=e.regionInp&&(console.log("regionInp = ",e.regionInp),console.log("|"+e.regionInp+"|"),r=r.where("regionID","==",e.regionInp)),""!=e.driverUserId&&(console.log("driverUserId = ",e.driverUserId),r=r.where("driverID","==",e.driverUserId.trim())),""!=e.shopMobileInp&&(console.log("shopMobileInp "),r=r.where("fromMobile","==",e.shopMobileInp)),""!=e.customerMobileInp&&(console.log("customerMobileInp "),r=r.where("deliveryGroup","==",e.customerMobileInp)),r=r.limit(10).orderBy("t_request"),e.dataRef=r;const a=yield r.get();console.log(a.empty),a.empty||(e.showMore=!0,a.forEach((function(e){t.lastDoc=e,t.deliveryList.push(i()(i()({},e.data()),{},{docid:e.id}))})))}))()},routing(e){this.$router.push({name:"ShowDelivery",params:{delivery:e,fromArchive:!0}})},styleFn(e,t){let r=t-e-500;this.generalStyle={height:r+"px"}}}})),h=m,f=(r("30ff"),r("2877")),v=r("9989"),b=r("f09f"),g=r("3b73"),y=r("a370"),I=r("27f9"),x=r("0016"),q=r("7cbe"),S=r("52ee"),w=r("ddd8"),k=r("eb85"),C=r("4b7e"),$=r("9c40"),M=r("4983"),D=r("a12b"),_=r("66e5"),Q=r("4074"),E=r("cb32"),L=r("0170"),R=r("de5e"),U=r("8572"),A=r("714f"),P=r("eebe"),F=r.n(P),T=Object(f["a"])(h,a,o,!1,null,null,null);t["default"]=T.exports;F()(T,"components",{QPage:v["a"],QCard:b["a"],QExpansionItem:g["a"],QCardSection:y["a"],QInput:I["a"],QIcon:x["a"],QPopupProxy:q["a"],QDate:S["a"],QSelect:w["a"],QSeparator:k["a"],QCardActions:C["a"],QBtn:$["a"],QScrollArea:M["a"],QVirtualScroll:D["a"],QItem:_["a"],QItemSection:Q["a"],QAvatar:E["a"],QItemLabel:L["a"],QPageSticky:R["a"],QField:U["a"]}),F()(T,"directives",{Ripple:A["a"]})},fbdb:function(e,t,r){}}]);