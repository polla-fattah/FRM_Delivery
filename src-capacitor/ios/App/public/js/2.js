(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"4b50":function(t,e,s){t.exports=s.p+"img/loading.png"},7402:function(t,e,s){},"9c0d":function(t,e,s){t.exports=s.p+"img/askdelivery.png"},f9f9:function(t,e,s){"use strict";var i=s("7402"),r=s.n(i);r.a},fcf6:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"column",attrs:{id:"page-delivery","style-fn":t.styleFn}},[i("q-list",[i("q-item-section",{staticClass:"list-header"},[i("div",{attrs:{id:"page-title"}},[t._v(t._s(t.$t("delivery")))])]),0==t.deliveryList.length?i("q-item-section",{attrs:{id:"delivery-noresult-container"}},[i("q-img",{staticStyle:{width:"90wv"},attrs:{src:s("9c0d"),"spinner-color":"white"}}),i("q-item-label",{staticClass:"delivery-noresult"},[t._v(t._s(t.$t("noResult")))])],1):i("q-scroll-area",{staticClass:"fill-window",style:t.generalStyle,attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle,id:"scroll-area-with-virtual-scroll-1"}},[i("q-virtual-scroll",{staticClass:"col",attrs:{"scroll-target":"#scroll-area-with-virtual-scroll-1 > .scroll",items:t.deliveryList,"virtual-scroll-item-size":16},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[i("div",{staticClass:"delivery-list-item"},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.routing(s)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("q-icon",{style:t.rotating(s.status),attrs:{name:"double_arrow",size:"2.5rem"}})],1)],1),i("q-item-section",[i("q-item-label",{staticClass:"delivery-list-item-title",attrs:{lines:"1"}},[t._v(t._s(t.showTitle(s)))]),i("q-item-label",{attrs:{caption:"",lines:"2"}},[i("span",{staticClass:"delivery-list-item-subtitle"},[t._v(t._s(s.toAddress))])])],1)],1)],1)]}}])}),i("q-img",{staticStyle:{width:"30vw"},attrs:{src:s("4b50"),"spinner-color":"white"}})],1)],1),t.$store.getters.isShop?i("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[i("q-btn",{staticStyle:{background:"#105783"},attrs:{fab:"",icon:"add",color:"dark"},on:{click:t.goToAddTask}})],1):t._e()],1)},r=[],a=s("ded3"),o=s.n(a),l=s("2b0e"),n=s("032d"),d=l["a"].extend({name:"PageIndex",components:{},mounted(){this.userInfo&&!this.dataFetched&&this.fetchData()},data(){return{dataFetched:!1,seq:1,deliveryList:[],generalStyle:{height:"650px"},thumbStyle:{right:"3px",borderRadius:"4px",backgroundColor:"#0299e3",width:"8px",opacity:.75},barStyle:{borderRadius:"8px",backgroundColor:"#999999",width:"14px",opacity:.2,marginTop:"-3px",marginBottom:"-3px",paddingTop:"3px",paddingBottom:"3px"}}},computed:{userInfo(){return this.$store.state.userInfo}},watch:{deliveryList(t){},userInfo(t){t&&!this.dataFetched&&this.fetchData()}},methods:{rotating(t){return{transform:"en-us"==this.$i18n.locale?"rotate(0deg)":"rotate(180deg)",color:50==t?"moccasin":40==t?"lime":"DarkSlateBlue"}},showTitle(t){return this.$store.getters.isShop?t.toName:t.fromName},fetchData(){this.dataFetched=!0;let t=this,e=n["c"];this.$store.getters.isDriver?(console.log("this.userInfo.idthis.userInfo.idthis.userInfo.idthis.userInfo.id"),console.log(this.userInfo.id),console.log("this.userInfo.idthis.userInfo.idthis.userInfo.idthis.userInfo.id"),e=e.where("driverID","==",this.userInfo.id),e=e.where("status",">",11)):this.$store.getters.isShop?(e=e.where("fromId","==",this.userInfo.id),e=e.where("status",">",11)):this.$store.getters.isAdmin&&(e=e.where("status",">",11)),e.onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type&&(t.deliveryList.push(o()(o()({},e.doc.data()),{},{id:e.doc.id,key:t.seq})),t.seq++),"modified"===e.type){const s=t=>t.id===e.doc.id,i=t.deliveryList.findIndex(s);t.deliveryList[i]=o()(o()({},e.doc.data()),{},{id:e.doc.id,key:t.seq}),t.seq++}"removed"===e.type&&(t.deliveryList=t.deliveryList.filter((function(t){return t.id!==e.doc.id})))}))}))},goToAddTask(){this.$store.getters.isShop&&this.$router.push({name:"EditDelivery",params:{delivery:null,role:this.$store.getters.getRole}})},routing(t){this.$store.getters.isDriver?this.$router.push({name:"ShowDelivery",params:{delivery:t}}):this.$store.getters.isShop?this.$router.push({name:"EditDelivery",params:{delivery:t,role:this.$store.getters.getRole}}):this.$store.getters.isAdmin&&this.$router.push({name:"AssignDriver",params:{delivery:t}})},styleFn(t,e){let s=e-t-50;this.generalStyle={height:s+"px"}}}}),c=d,h=(s("f9f9"),s("2877")),u=s("9989"),p=s("1c1c"),m=s("4074"),g=s("068f"),f=s("0170"),v=s("4983"),y=s("a12b"),b=s("66e5"),w=s("cb32"),I=s("0016"),q=s("de5e"),S=s("9c40"),$=s("714f"),k=s("eebe"),x=s.n(k),_=Object(h["a"])(c,i,r,!1,null,null,null);e["default"]=_.exports;x()(_,"components",{QPage:u["a"],QList:p["a"],QItemSection:m["a"],QImg:g["a"],QItemLabel:f["a"],QScrollArea:v["a"],QVirtualScroll:y["a"],QItem:b["a"],QAvatar:w["a"],QIcon:I["a"],QPageSticky:q["a"],QBtn:S["a"]}),x()(_,"directives",{Ripple:$["a"]})}}]);