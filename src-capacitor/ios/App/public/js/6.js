(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"01ad":function(e,t,s){},9822:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"column",attrs:{id:"page-show-delivery"}},[s("q-card",[s("q-card-section",{attrs:{id:"detail"}},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("delivery_details")))]),s("div",{staticClass:"delivery-info text-subtitle2"},[s("div",{staticClass:"delivery-info-input"},[s("q-input",{ref:"name",attrs:{outlined:"",autofocus:"",label:e.$t("name"),disable:null!=e.delivery&&e.delivery.status<40,rules:[function(t){return t&&t.length>0||e.$t("enterValidName")}],"lazy-rules":""},model:{value:e.send.toName,callback:function(t){e.$set(e.send,"toName",t)},expression:"send.toName"}})],1),s("div",{staticClass:"delivery-info-input"},[s("q-input",{ref:"mobile",attrs:{"data-111":"",outlined:"",label:e.$t("mobile"),disable:null!=e.delivery&&e.delivery.status<40,rules:[function(t){return t&&0==t.search(/^0[0-9]{10}$/)||e.$t("enterValidMobile")}],"lazy-rules":""},on:{blur:function(t){return e.fixMobile()}},model:{value:e.send.toMobile,callback:function(t){e.$set(e.send,"toMobile",t)},expression:"send.toMobile"}})],1),s("div",{staticClass:"delivery-info-input"},[s("q-input",{ref:"address",attrs:{outlined:"",label:e.$t("address"),disable:null!=e.delivery&&e.delivery.status<40,rules:[function(t){return t&&t.length>0||e.$t("enterValidAddress")}],"lazy-rules":""},model:{value:e.send.toAddress,callback:function(t){e.$set(e.send,"toAddress",t)},expression:"send.toAddress"}})],1),s("div",{staticClass:"delivery-info-input"},[s("q-input",{ref:"price",attrs:{outlined:"",label:e.$t("price"),disable:null!=e.delivery&&e.delivery.status<40,rules:[function(t){return t&&!isNaN(e.$parseArabic(t))||e.$t("enterValidPrice")}],"lazy-rules":""},on:{blur:function(t){return e.fixPrice()}},model:{value:e.send.price,callback:function(t){e.$set(e.send,"price",t)},expression:"send.price"}})],1),s("div",{staticClass:"delivery-info-input"},[s("q-input",{ref:"items",attrs:{outlined:"",type:"textarea",label:e.$t("items"),disable:null!=e.delivery&&e.delivery.status<40},model:{value:e.send.items,callback:function(t){e.$set(e.send,"items",t)},expression:"send.items"}})],1)])]),s("q-separator",{attrs:{dark:""}}),s("q-card-actions",{staticClass:"row justify-center",attrs:{id:"control"}},[s("q-btn",{attrs:{color:"secondary",label:e.$t("submit")},on:{click:function(t){return e.submit()}}}),e.delivery&&50==e.delivery.status?s("q-btn",{attrs:{color:"negative",label:e.$t("delete")},on:{click:function(t){e.confirm=!0}}}):e._e(),s("q-btn",{attrs:{color:"warning",label:e.$t("cancel")},on:{click:function(t){return e.$router.go(-1)}}})],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("q-avatar",{attrs:{icon:"highlight_off",color:"red","text-color":"white"}}),s("span",{staticClass:"q-ml-sm"},[e._v(e._s(e.$t("areYouSureDelete")))])],1),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$t("yes"),color:"negative"},on:{click:e.deleteRecord}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$t("no"),color:"primary"}})],1)],1)],1)],1)},r=[],n=(s("4fad"),s("5319"),s("ddb0"),s("ded3")),l=s.n(n),a=s("c973"),o=s.n(a),d=s("2b0e"),c=s("59ca"),u=s.n(c),f=s("032d"),v=d["a"].extend({name:"EditDelivery",created(){this.send=this.delivery?this.delivery:{}},props:["delivery"],data(){return{send:null,confirm:!1}},mounted(){this.delivery&&(this.delivery.toMobile=this.delivery.toMobile.replace("+964","0"))},methods:{fixMobile(){this.send.toMobile=this.$parseArabic(this.send.toMobile)},fixPrice(){console.log(this.send.price),this.send.price=this.$parseArabic(this.send.price)},setDelivery(){this.delivery||(this.send.t_assigne=null,this.send.t_collection=null,this.send.t_delivering=null,this.send.t_request=u.a.firestore.FieldValue.serverTimestamp(),this.send.driverID=null,this.send.regionID=this.$store.state.userInfo.regionID,this.send.fromId=this.$store.state.userInfo.id,this.send.fromAddress=this.$store.state.userInfo.address,this.send.fromLong=this.$store.state.userInfo.longitude,this.send.fromLat=this.$store.state.userInfo.latitude,this.send.fromMobile=this.$store.state.userInfo.mobile,this.send.fromName=this.$store.state.userInfo.name,this.send.status=50,this.send.toId=""),this.send.price=parseFloat(this.send.price),this.send.toMobile="+964"+this.send.toMobile.substr(1)},submit(){var e=this;return o()((function*(){for(let s of Object.entries(e.$refs))if(!s[1].validate())return;e.setDelivery();try{if(e.delivery){let t=l()({},e.send);delete t.id,yield f["c"].doc(e.delivery.id).set(t)}else console.log(e.send),yield f["c"].add(e.send)}catch(t){console.error(t)}e.$router.go(-1)}))()},deleteRecord(){this.delivery&&50==this.delivery.status&&(f["c"].doc(this.delivery.id).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),this.$router.go(-1))}}}),p=v,b=(s("d873"),s("2877")),h=s("9989"),m=s("f09f"),y=s("a370"),$=s("27f9"),g=s("eb85"),q=s("4b7e"),x=s("9c40"),C=s("24e8"),k=s("cb32"),w=s("7f67"),I=s("eebe"),M=s.n(I),_=Object(b["a"])(p,i,r,!1,null,null,null);t["default"]=_.exports;M()(_,"components",{QPage:h["a"],QCard:m["a"],QCardSection:y["a"],QInput:$["a"],QSeparator:g["a"],QCardActions:q["a"],QBtn:x["a"],QDialog:C["a"],QAvatar:k["a"]}),M()(_,"directives",{ClosePopup:w["a"]})},d873:function(e,t,s){"use strict";var i=s("01ad"),r=s.n(i);r.a}}]);